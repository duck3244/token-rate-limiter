graph TB
    %% 클라이언트 존
    subgraph "Client Zone"
        Mobile[📱 Mobile Apps]
        Web[💻 Web Apps]
        API_Client[🔌 API Clients]
    end
    
    %% 로드 밸런서
    LoadBalancer[⚖️ Load Balancer<br/>NGINX Ingress Controller]
    
    %% Kubernetes 클러스터
    subgraph "Kubernetes Cluster"
        
        %% 네임스페이스: model-serving
        subgraph "Namespace: model-serving"
            
            %% Token Rate Limiter 파드들
            subgraph "Token Rate Limiter Deployment"
                Pod1[🛡️ Token Rate Limiter Pod 1<br/>Spring Boot WebFlux<br/>CPU: 200m-500m<br/>Memory: 512Mi-1Gi]
                Pod2[🛡️ Token Rate Limiter Pod 2<br/>Spring Boot WebFlux<br/>CPU: 200m-500m<br/>Memory: 512Mi-1Gi]
                Pod3[🛡️ Token Rate Limiter Pod 3<br/>Spring Boot WebFlux<br/>CPU: 200m-500m<br/>Memory: 512Mi-1Gi]
            end
            
            %% Redis 클러스터
            subgraph "Redis Deployment"
                RedisMain[💾 Redis Master<br/>CPU: 100m-200m<br/>Memory: 256Mi-512Mi]
                RedisReplica[💾 Redis Replica<br/>CPU: 100m-200m<br/>Memory: 256Mi-512Mi]
            end
            
            %% vLLM 모델 서버들
            subgraph "vLLM Model Servers"
                Llama7B[🤖 Llama2-7B Pod<br/>GPU: 1x NVIDIA<br/>Memory: 16Gi-32Gi<br/>CPU: 4-8 cores]
                Llama13B[🤖 Llama2-13B Pod<br/>GPU: 1x NVIDIA<br/>Memory: 32Gi-64Gi<br/>CPU: 8-16 cores]
                GPT35[🤖 GPT-3.5 Pod<br/>GPU: 1x NVIDIA<br/>Memory: 16Gi-32Gi<br/>CPU: 4-8 cores]
            end
            
            %% 서비스들
            TRLService[📡 Token Rate Limiter Service<br/>ClusterIP:8080]
            RedisService[📡 Redis Service<br/>ClusterIP:6379]
            ModelServices[📡 Model Services<br/>ClusterIP:8000]
            
        end
        
        %% 네임스페이스: monitoring
        subgraph "Namespace: monitoring"
            PrometheusPod[📊 Prometheus Pod<br/>CPU: 500m-1000m<br/>Memory: 1Gi-2Gi]
            GrafanaPod[📈 Grafana Pod<br/>CPU: 100m-200m<br/>Memory: 256Mi-512Mi]
            AlertManagerPod[🚨 AlertManager Pod<br/>CPU: 100m-200m<br/>Memory: 128Mi-256Mi]
        end
        
        %% 스토리지
        subgraph "Persistent Storage"
            RedisVolume[(💾 Redis PVC<br/>10Gi SSD)]
            PrometheusVolume[(📊 Prometheus PVC<br/>50Gi SSD)]
            GrafanaVolume[(📈 Grafana PVC<br/>5Gi SSD)]
            ModelCache[(🤖 Model Cache PVC<br/>100Gi SSD)]
        end
        
        %% ConfigMaps & Secrets
        subgraph "Configuration"
            ConfigMap[⚙️ ConfigMaps<br/>Application Settings]
            Secrets[🔐 Secrets<br/>API Keys & Passwords]
        end
        
        %% HPA & 스케일링
        subgraph "Auto Scaling"
            HPA[📈 HPA<br/>CPU/Memory Based<br/>3-10 replicas]
            VPA[📊 VPA<br/>Resource Optimization]
        end
        
    end
    
    %% 외부 모니터링
    subgraph "External Monitoring"
        LogAggregator[📝 Log Aggregator<br/>ELK Stack]
        ExternalMetrics[📊 External Metrics<br/>DataDog/New Relic]
    end
    
    %% 연결 관계
    Mobile --> LoadBalancer
    Web --> LoadBalancer
    API_Client --> LoadBalancer
    
    LoadBalancer --> TRLService
    
    TRLService --> Pod1
    TRLService --> Pod2
    TRLService --> Pod3
    
    Pod1 --> RedisService
    Pod2 --> RedisService
    Pod3 --> RedisService
    
    RedisService --> RedisMain
    RedisMain --> RedisReplica
    
    Pod1 --> ModelServices
    Pod2 --> ModelServices
    Pod3 --> ModelServices
    
    ModelServices --> Llama7B
    ModelServices --> Llama13B
    ModelServices --> GPT35
    
    %% 스토리지 연결
    RedisMain --> RedisVolume
    PrometheusPod --> PrometheusVolume
    GrafanaPod --> GrafanaVolume
    Llama7B --> ModelCache
    Llama13B --> ModelCache
    GPT35 --> ModelCache
    
    %% 설정 연결
    Pod1 --> ConfigMap
    Pod2 --> ConfigMap
    Pod3 --> ConfigMap
    Pod1 --> Secrets
    Pod2 --> Secrets
    Pod3 --> Secrets
    
    %% 모니터링 연결
    Pod1 --> PrometheusPod
    Pod2 --> PrometheusPod
    Pod3 --> PrometheusPod
    PrometheusPod --> GrafanaPod
    PrometheusPod --> AlertManagerPod
    
    %% 스케일링 연결
    HPA --> Pod1
    HPA --> Pod2
    HPA --> Pod3
    VPA --> Pod1
    VPA --> Pod2
    VPA --> Pod3
    
    %% 외부 모니터링
    Pod1 --> LogAggregator
    Pod2 --> LogAggregator
    Pod3 --> LogAggregator
    PrometheusPod --> ExternalMetrics
    
    %% 스타일링
    classDef clientStyle fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef lbStyle fill:#e3f2fd,stroke:#1565c0,stroke-width:2px
    classDef appStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef dataStyle fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    classDef modelStyle fill:#ffebee,stroke:#c62828,stroke-width:2px
    classDef monitorStyle fill:#f1f8e9,stroke:#558b2f,stroke-width:2px
    classDef storageStyle fill:#fce4ec,stroke:#ad1457,stroke-width:2px
    classDef configStyle fill:#fff8e1,stroke:#f9a825,stroke-width:2px
    classDef scalingStyle fill:#e0f2f1,stroke:#00695c,stroke-width:2px
    
    class Mobile,Web,API_Client clientStyle
    class LoadBalancer lbStyle
    class Pod1,Pod2,Pod3,TRLService appStyle
    class RedisMain,RedisReplica,RedisService dataStyle
    class Llama7B,Llama13B,GPT35,ModelServices modelStyle
    class PrometheusPod,GrafanaPod,AlertManagerPod,LogAggregator,ExternalMetrics monitorStyle
    class RedisVolume,PrometheusVolume,GrafanaVolume,ModelCache storageStyle
    class ConfigMap,Secrets configStyle
    class HPA,VPA scalingStyle